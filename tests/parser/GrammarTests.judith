object ParserGenerator := Objects.Parsing.ParserGenerator
object Grammar := Objects.Parsing.Grammar

object GrammarTests := Object 
|[
    method testCanAddRule
    [
        object grammar := Grammar.copy
        grammar.addRule("foo", ParserGenerator.literal("foo"))
    ]
    
    method testCanSetDefaultRule
    [
        object grammar := Grammar.copy
        grammar.setDefaultRule("foo")
    ]
    
    method testDefaultRuleMustBeAddedFirst
    [
        object grammar := Grammar.copy
        object exceptionWasThrown := false
        
        ExceptionHandler 
        |[
            method try 
            [
                grammar.setDefaultRule("foo")
            ]
            
            method catch(exception)
            [
                exceptionWasThrown := true
            ]
        ]|.run
        
#todo        Assert.that(exceptionWasThrown)
    ]

]|

GrammarTests
  .testCanAddRule
  .testCanSetDefaultRule
  .testDefaultRuleMustBeAddedFirst
