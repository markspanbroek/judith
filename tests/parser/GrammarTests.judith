object ParserGenerator := Objects.Parsing.ParserGenerator
object Grammar := Objects.Parsing.Grammar

object GrammarTests := Object 
|[

    object grammar := null
    
    method setup
    [
        grammar := Grammar.copy
    ]

    method testCanAddRule
    [
        self.setup
        grammar.addRule("foo", ParserGenerator.literal("foo"))
    ]
    
    method testDefaultRuleMustBeAddedFirst
    [
        self.setup
        object exceptionWasThrown := false
        
        ExceptionHandler 
        |[
            method try 
            [
                grammar.setDefaultRule("foo")
            ]
            
            method catch(exception)
            [
                exceptionWasThrown := true
            ]
        ]|.run
        
        Assert.that(exceptionWasThrown)
    ]

]|

GrammarTests
  .testCanAddRule
  .testDefaultRuleMustBeAddedFirst
