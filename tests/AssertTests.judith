object AssertTests := Object |[

  method doesNotThrowOnTrue 
  [
    Assert.that(true)
  ] 
  
  method throwsOnFalse 
  [
    object exception := null
    
    ExceptionHandler |[
      method try 
      [
        Assert.that(false)
      ]
      method catch(exception')
      [
        exception := exception'
      ]
    ]|.run
    
    if not (exception : AssertionFailedException)
      AssertionFailedException.throw
    fi
  ]
  
  method throwsWhenNotEqual
  [
    object exception := null
    
    ExceptionHandler |[    
        method try
        [
            Assert.equal(1, 2)
        ]
        method catch(exception')
        [
            exception := exception'
        ]
    ]|.run
    
    Assert.that(exception : AssertionFailedException)
  ]
  
  method doesNotThrowWhenEqual
  [
    Assert.equal(1,1)
  ]
  
  method descibesWhatsWrongWhenNotEqual
  [
    ExceptionHandler |[    
        method try
        [
            Assert.equal(1, 2)
        ]
        method catch(exception)
        [
            Assert.equal("Expected '1' but got '2'", exception.message)
        ]
    ]|.run
  ]
  
]|

AssertTests
  .doesNotThrowOnTrue
  .throwsOnFalse
  .throwsWhenNotEqual
  .doesNotThrowWhenEqual
  .descibesWhatsWrongWhenNotEqual
